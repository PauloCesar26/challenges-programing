<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // 1) Challenge calculate shopping
        // const products = [];
        // let addMoreProducts = true;

        // const calculateDiscount = (price, discount) => {
        //     const priceDiscount = price * discount;
        //     const newPrice = price - priceDiscount;
        //     return newPrice;
        // };

        // while(addMoreProducts){
        //     const nameProduct = prompt("Enter the product name");
        //     const priceProduct = prompt("Enter the price of product");
        //     const qtdProduct = prompt("Enter the qtd of product");

        //     const infoProduct = {
        //         name: nameProduct,
        //         price: parseFloat(priceProduct).toFixed(2),
        //         qtd: parseInt(qtdProduct),
        //     };

        //     products.push(infoProduct);

        //     const more = prompt("Do you want add more products? s/n").toLowerCase();
        //     if(more !== "s"){
        //         addMoreProducts = false;
        //     }
        // }

        // const pricesProducts = products.map((p) => {
        //     return p.price * p.qtd;
        // });
        // const sumPrice = pricesProducts.reduce((acc, p) => acc + Number(p), 0);
        
        // console.log(products);
        // console.log("--------------");
        // console.log(`Sum of prices: ${parseFloat(sumPrice).toFixed(2)}`);
        // console.log("--------------");

        // if(sumPrice > 500){
        //     console.log(`The value of your buy is bigger that 500, so you get 10% off \nNew Price your buy: ${calculateDiscount(sumPrice, 0.10)}`);
        // }


        // _______________________________________________________________________________

        // Algoritmo:
        // 1 - Verificar se é a loja que está entrando ou um usuario
        // 2 - Se for a loja:
        // 2.1 - Vai digitar a senha para acessar
        // 2.2 - Acessando, vai adicionar os produtos
        // 3 - Se não for a loja:
        // 3.1 - User vai poder pedir um produto: nome e quantidade
        // System vai verificar se tem no estoque e retorna para o user

        // const storeStock = [];
        // const storePassword = 123;
        // let accessStore = false;
        // let login = true;

        // while(login){
        //     const checkUser = prompt("Do you is the store? s/n - Digite sair para cancelar a operação").toLowerCase();
    
        //     if(checkUser === "s"){
        //         while(true){
        //             const enterPassword = prompt("Enter with password of store to access the store");
                    
        //             if(Number(enterPassword) === storePassword){
        //                 accessStore = true;
                        
        //                 if(accessStore){
        //                     let addMoreProductsStock = true;
            
        //                     while(addMoreProductsStock){
        //                         const nameProduct = prompt("Enter the product name");
        //                         const priceProduct = prompt("Enter the price of product");
        //                         const qtdProduct = prompt("Enter the qtd of product");
            
        //                         const infoProduct = {
        //                             name: nameProduct,
        //                             price: parseFloat(priceProduct).toFixed(2),
        //                             qtd: parseInt(qtdProduct),
        //                         };
            
        //                         storeStock.push(infoProduct);
            
        //                         const more = prompt("Do you want add more products? s/n").toLowerCase();
                                
        //                         if(more !== "s"){
        //                             addMoreProductsStock = false;
        //                         }    
        //                     }
            
        //                     console.log(storeStock);
        //                 }break;
        //             }
        //             else{
        //                 accessStore = false;
        //                 console.log("Invalid password!!");
        //             }
        //         }
        //     }
        //     else if(checkUser === "n"){

        //         const makeOrderNameProduct = prompt("Enter the name product to make order");
        //         const makeOrderQtdProduct = prompt("Enter the qtd product to make order:");

        //         console.log(makeOrderNameProduct);
        //         console.log(makeOrderQtdProduct);
        //     }
        //     else if(checkUser === "sair"){
        //         console.log("Operation cancelad!");
        //         login = false;
        //     }
        //     else{
        //         console.log("Invalid option!");
        //     }
        // }

        // _______________________________________________________________________________


        // const patientList = [
        //     {
        //         name: "Paulo",
        //         age: 18,
        //         password: 1
        //     },
        //     {
        //         name: "Cesar",
        //         age: 55,
        //         password: 2
        //     },
        //     {
        //         name: "Katia",
        //         age: 55,
        //         password: 3
        //     },
        //     {
        //         name: "Elisa",
        //         age: 16,
        //         password: 4
        //     },
        //     {
        //         name: "Milena",
        //         age: 27,
        //         password: 5
        //     },
        //     {
        //         name: "Gloria",
        //         age: 80,
        //         password: 6
        //     },
        //     {
        //         name: "Maria",
        //         age: 81,
        //         password: 7
        //     },
        // ];
        
        // const sortedListPatient = () => {
        //     const sortListPatient = patientList.sort((a, b) => {
        //         const patientA = a.age >= 60 ? 0 : 1;
        //         const patientB = b.age >= 60 ? 0 : 1;
                
        //         if(patientA !== patientB) return patientA - patientB;
        //         return a.password - b.password;
        //     });

        //     return sortListPatient;
        // };
        
        // const addPatientList = (name, age, password) => {
        //     const newPatient = {
        //         name: name,
        //         age: age,
        //         password: password
        //     }

        //     patientList.push(newPatient);
        //     sortedListPatient();

        //     console.log(`Patient add with success: ${name}`);
        // };

        // const displayListPatient = () => {
        //     sortedListPatient().forEach(p => console.log(p));
        // };

        // const callPatient = () => {
        //     if(patientList.length === 0){
        //         console.log("Patient line is empty.");
        //         return;
        //     }

        //     sortedListPatient();
        //     const nextPatient = patientList.shift();
        //     console.log(`Call first patient of list: ${nextPatient.name}, password: ${nextPatient.password}`);
        //     return nextPatient;
        // };


        // _______________________________________________________________________________


        // const checkValuePositiveAndNegative = (listTransaction) => {
        //     let countValuesPostive = 0;

        //     const values = {
        //         positive: [],
        //         negative: []
        //     };

        //     for(const v of listTransaction){
        //         if(v > 0){
        //             values.positive.push(v);
        //             countValuesPostive += 1;
        //         }
        //         else{
        //             values.negative.push(v);
        //         }
        //     }

        //     const someTransactionsPositive = values.positive.reduce((acc, value) => acc + value);

        //     console.log(`Transactions valid: ${values.positive}`);
        //     console.log(`Total balance: ${someTransactionsPositive}`);
        //     console.log(`quantity of transactions positive: ${countValuesPostive}`);
        // };

        // const listTransactionBank = [150.00, -25.50, 400.00, 10.00, -50.00, 200.00, -1000.00];

        // console.log(checkValuePositiveAndNegative(listTransactionBank));


        // _______________________________________________________________________________


        // const initialStock = [
        //     {
        //         id: 1,
        //         name: "Shirt",
        //         quantity: 50,
        //         price: 40
        //     },
        //     {
        //         id: 2,
        //         name: "Pants",
        //         quantity: 50,
        //         price: 50
        //     },
        //     {
        //         id: 3,
        //         name: "Coat",
        //         quantity: 50,
        //         price: 70
        //     }
        // ];
        // const orderHistory = [];

        // const addNewProductsList = (
        //     name, 
        //     quantity, 
        //     price
        // ) => {
        //     const someID = initialStock.map(({id}) => id);
        //     console.log(someID);
        //     const lastId = someID.at(-1);
        //     console.log(lastId);

        //     const newProduct = {
        //         id: lastId + 1,
        //         name: name,
        //         quantity: quantity,
        //         price: price
        //     };

        //     initialStock.push(newProduct);

        //     console.log(newProduct);
        //     console.log("--------------------------------");
        // };

        // function queryProductStock(initialStock){
        //     console.log("--Inictial Stock--")
        //     for(const p of initialStock){
        //         console.log(p);
        //     }
        //     console.log("--------------------------");
        // }

        // const makeOrder = ({
        //     id = null, 
        //     name = null, 
        //     desiredQuantity = 1
        // }) => {
        //     let findProduct = null;

        //     if(id || name){
        //         if(id){
        //             findProduct = initialStock.find((p) => p.id === id);
        //         }
        //         if(name){
        //             findProduct = initialStock.find((p) => p.name === name);
        //         }

        //         if(findProduct !== undefined){
        //             const { quantity } = findProduct;

        //             if(quantity >= desiredQuantity){
        //                 console.log("Product in the stock.");
                
        //                 findProduct.quantity -= desiredQuantity;
        //                 const totalValueOrder = desiredQuantity * findProduct.price;

        //                 console.log(`--Information of order-- \nName product: ${findProduct.name} \nQuantity: ${desiredQuantity} \nTotal pagament: ${totalValueOrder}`);

        //                 const orderDone = {
        //                     name: findProduct.name,
        //                     quantity: desiredQuantity,
        //                     price: totalValueOrder
        //                 };

        //                 orderHistory.push(orderDone);
        //                 newStock(findProduct);
        //             }
        //             else{
        //                 console.log("Insufficient quantity.");
        //             }
        //         }
        //     }
        //     else{
        //         console.log("Order null.");
        //     }

        //     if(findProduct === undefined){
        //         console.log("Product not found.")
        //         return;
        //     }
        // };

        // const newStock = (updateProduct) => {
        //     const updateProductStock = updateProduct;

        //     const updateStock = initialStock.map((p) => {
        //         if(p.id === updateProduct.id || p.name === updateProduct.name){
        //             return updateProductStock;
        //         }

        //         return p;
        //     });

        //     console.log("--New stock--")
        //     console.log(updateStock);
        //     console.log("--------------------------");
        //     calculateTotalStock(updateStock);
        // };

        // const calculateTotalStock = (stock) => {
        //     let sumTotal = 0;

        //     stock.forEach(p => {
        //         const calculate = p.quantity * p.price;

        //         console.log(`Calculate of product: ${p.name} \nTotal: ${calculate}`);
        //         sumTotal += calculate;
        //     });

        //     console.log(`Sum total of stock: ${sumTotal}`);
        // };

        // queryProductStock(initialStock);
        // makeOrder({name: "Coat"});


        // _______________________________________________________________________________


        // const getString = (string) => {
        //     const phrase = string.toLowerCase();

        //     const getWords = phrase.match(/\b\w+\b/g);

        //     const countQuantity = getWords.reduce((acc, w) => {
        //         if(w.length > 2){
        //             acc[w] = (acc[w] || 0) + 1;
        //         }

        //         return acc;
        //     }, {});

        //     const convertObjectForArray = Object.entries(countQuantity);
        //     const countSorted = convertObjectForArray.sort((a, b) => b[1] - a[1]).slice(0, 3);

        //     for(const wordKey of countSorted){
        //         console.log(wordKey);
        //     }
        // };

        // getString("O mercado de tecnologia de ponta é um mercado onde a inovação é a chave. Tecnologia e inovação andam juntas");


        // _______________________________________________________________________________

        const removeAccents = str => str.normalize("NFD").replace(/[\u0300-\u036f]/g, "");

        const titles = [
            "Previsão do Tempo: Chuva forte na capital.",
            "Economia: Mercado financeiro reage mal ao IPCA.",
            "Política: Debate na capital sobre novas leis.",
            "Previsão do tempo: Frio recorde chega ao sul.",
            "Economia: Novo índice de mercado sobe.",
            "Esportes: Time do sul vence campeonato.",
            "Política: Reunião sobre leis trabalhistas em Brasília."
        ];

        const countForTopic = {};

        // const mainTitles = titles.map(t => t.split(":")[0].trim().toLowerCase()); 
        // const formatedTiles = mainTitles.map(t => removeAccents(t));

        for(const t of titles){
            const [topic, description] = t.split(":");

            const formatedTopic = topic.trim().toLocaleLowerCase();
            const words = description.match(/\b\w+\b/g).map(w => removeAccents(w.toLowerCase()));

            const wordCount = {};
            for(const w of words){
                if(w.length > 2){
                    wordCount[w] = (wordCount[w] || 0) + 1;
                }
            }

            countForTopic[topic] = wordCount;
        }
        
        console.log(countForTopic);
        //     const countSorted = convertObjectForArray.sort((a, b) => b[1] - a[1]).slice(0, 3);

        

        // [
        //     previsao: {
        //         word a: 1,
        //         word b: 1,
        //     }
        //     economia: {
        //         word a: 2
        //     }
        // ]


        // const getTitles = (titles) => {
        //     const mainTitles = titles.map(t => t.split(":")[0].trim().toLowerCase()); 
        //     const formatedTiles = mainTitles.map(t => t.normalize("NFD").replace(/[\u0300-\u036f]/g, ""));
        // }


    </script>
</body>
</html>