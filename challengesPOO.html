<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Challenges POO</title>
</head>
<body>
    <script>
        // Encapsulamento and Herança
            // Encapsulamento:é o principio de agrupar dados(atributos), metodos(funções) que operam sobre esses dados
                // em uma unica classe principal e ao mesmo tempo restringe o acesso direto aos dados de fora(capsula protetora).
                // Capsula (Agrupamento): classe banckAccount agrupa o que é a conta e o que ela faz, atributos e metodos 
                // Restrição de acesso: o encapsulamento garante que os dados internos do objeto não possam ser alterados de forma incontrolavel
            
            // Herança:usado para uma classe herdar todos os atributos e metodos de uma clase principal 
            
        // class bankAccount{
        //     constructor(titular){
        //         this.titular = titular;
        //         this.currentMoney = 0.00;
        //     }

        //     deposit(depositValue){
        //         if(depositValue > 0){
        //             this.currentMoney += depositValue;
        //             return this.currentMoney;
        //         }
        //         else{
        //             return 0;
        //         }
        //     }

        //     withdraw(withdrawValue){
        //         if(withdrawValue > 0 && this.currentMoney > withdrawValue){
        //             this.currentMoney -= withdrawValue; 
        //             return true;
        //         }
        //         else{
        //             return false;
        //         }
        //     }

        //     queryBankAccount(){
        //         return `Titular: ${this.titular} \nCurrent value: ${this.currentMoney}`;
        //     }
        // };

        // class savingMoneyAccount extends bankAccount{
        //     constructor(titular){
        //         super(titular);
        //         this.taxWithdraw = 5.00;
        //     }

        //     withdraw(withdrawValue){
        //         const calculateWithdraw = withdrawValue + this.taxWithdraw;

        //         if(this.currentMoney >= calculateWithdraw){
        //             this.currentMoney -= calculateWithdraw;
        //             console.log("Withdraw succes");
        //             return true;
        //         }
        //         else{
        //             console.log("Withdraw failed");
        //             return false;
        //         }

        //     }
        // };
        
        // const myAccount = new bankAccount("Paulo");
        // console.log(myAccount.currentMoney);
        // console.log(myAccount.deposit(500));
        // console.log(myAccount.deposit(-100));
        // console.log(myAccount.withdraw(200));
        // console.log(myAccount.withdraw(400));
        // console.log(myAccount.queryBankAccount());

        // console.log("----------------------------------------");

        // const myAccountSavingMoney = new savingMoneyAccount("Katia");
        // console.log(myAccountSavingMoney.deposit(100.00));
        // console.log(myAccountSavingMoney.withdraw(20.00));
        // console.log(myAccountSavingMoney.queryBankAccount());
        // console.log(myAccountSavingMoney.withdraw(30.00));


        // _______________________________________________________________________________


        // Associação
            // Associação: é o relacionamento de um objeto de uma classe se conectando ou
            // usando um objeto de outra classe para cumprir sua função. No desafio abaixo
            // um employee possui um address, fazendo com que os objetos se relacionam e trabalham juntos e 
            // separando responsabilidades

        // class address{
        //     constructor(street, numberHouse, city){
        //         this.street = street;
        //         this.numberHouse = numberHouse;
        //         this.city = city;
        //     }

        //     completeAddress(){
        //         return `${this.street}, ${this.numberHouse}, ${this.city}`;
        //     }
        // }

        // class employee{
        //     constructor(name, positionCompany, employeeAddressInstance){
        //         this.name = name;
        //         this.positionCompany = positionCompany;
        //         this.employeeAddress = employeeAddressInstance;
        //     }

        //     displayDetailsComplete(){
        //         const fullAddress = this.employeeAddress.completeAddress();

        //         return `${this.name}\n${this.positionCompany}\n${fullAddress}`;
        //     }
        // };

        // const addressPaulo = new address("Rua y", "157", "São Paulo");        
        // const employeePaulo = new employee("Paulo C.", "Desenvolvedor", addressPaulo);
        // console.log(employeePaulo.displayDetailsComplete());


        // _______________________________________________________________________________


        // Polimorfismo
            // é o uso de muitas formas "poli = muitas, morfismo = forma", ele é a capacidade 
            // de um único comando ou método assumir muitas formas de execução

            // polimorfismo no desafio ocorre na chamada do metodo "item.calculateArea()", 
            // para fazer o calculo de qualquer forma vai ser sempre chamado o calculateArea()
            // quando o codigo é executado, o runtime descobre o tipo real do objeto e executa 
            // a versão correta do método

        // class circulo{
        //     constructor(raio){
        //         this.raio = raio;
        //     }

        //     calculateArea(){
        //         const pi = 3.14;
        //         return pi * this.raio ** 2; 
        //     }
        // }

        // class retangulo{
        //     constructor(width, height){
        //         this.width = width;
        //         this.height = height;
        //     }

        //     calculateArea(){
        //         return this.width * this.height;
        //     }
        // }

        // const circle = new circulo(5);
        // const rectangle = new retangulo(4, 10);

        // const list = [circle, rectangle];
        // for(const item of list){
        //     console.log(item.calculateArea());
        // }

        
        // _______________________________________________________________________________


        // Encapsulamento, Herança and Polimorfismo
        // class vehicle{
        //     constructor(mark, model, consumingByKm){
        //         this.mark = mark;
        //         this.model = model;
        //         this.consumingByKm = consumingByKm;
        //     }

        //     getInfo(){
        //         return `Mark: ${this.mark} \nModel: ${this.model}`;
        //     }

        //     calculateExpenseTravel(distanceByKm, priceFuel){
        //         const expense = (distanceByKm / this.consumingByKm) * priceFuel;

        //         return expense;
        //     }
        // }

        // class car extends vehicle{
        //     constructor(mark, model, consumingByKm){
        //         super(mark, model, consumingByKm);
        //         this.taxToll = 20.00;
        //     }

        //     calculateExpenseTravel(distanceByKm, priceFuel){
        //         const fuelExpense = super.calculateExpenseTravel(distanceByKm, priceFuel);
        //         const totalExpense = fuelExpense + this.taxToll;

        //         return totalExpense;
        //     }
        // }

        // class truck extends vehicle{
        //     constructor(mark, model, consumingByKm, axes){
        //         super(mark, model, consumingByKm);
        //         this.axes = axes;
        //         this.taxByAxe = 5.00;
        //     }

        //     calculateExpenseTravel(distanceByKm, priceFuel){
        //         const fuelExpense = super.calculateExpenseTravel(distanceByKm, priceFuel);
        //         const variableTax = this.axes * this.taxByAxe;
        //         const totalExpense = fuelExpense + variableTax;
                
        //         return totalExpense;
        //     }
        // }

        // const carA = new car("Fiat", "Pulser", 10.0);
        // const truckB = new truck("Volvo", "FH", 3.0, 4);
        // const distance = 300;
        // const price = 6.0;

        // const expenseCar = carA.calculateExpenseTravel(distance, price);
        // const expenseTruck = truckB.calculateExpenseTravel(distance, price);

        // console.log(expenseCar);
        // console.log(expenseTruck);


        // _______________________________________________________________________________

        
        // Check instance of object (instance of)
        // function filterProducts(list){
        //     const instanceClassProduct = list.filter(el => el instanceof product);
        //     return instanceClassProduct;
        // }

        // class product{
        //     constructor(name){
        //         this.name = name;
        //     }
        // }

        // class service{
        //     constructor(description){
        //         this.description = description;
        //     }
        // }

        // const p1 = new product("Phone");
        // const s1 = new service("TI");
        // const p2 = new product("Notebook");
        // const s2 = new service("Consultoria");

        // const listItems = [p1, s1, p2, s2];

        // console.log(filterProducts(listItems));


        // _______________________________________________________________________________


        // Identifier name of class (constructor.name)
        // function getNameClasse(obj){
        //     console.log(obj.constructor.name);
        // }

        // class user{
        //     constructor(id){
        //         this.id = id;
        //     }
        // }

        // class order{
        //     constructor(total){
        //         this.total = total;
        //     }
        // }

        // const user1 = new user(47);
        // const order1 = new order(150.00);

        // getNameClasse(user1);
        // getNameClasse(order1);
       


        // _______________________________________________________________________________


        //Polimorfismo: FontWeb e FontEmail implementam o mesmo method "getMessage"

        //Associação: class CollectinManagerFont associa as instancia de classes 
            //atraves do array "this.listInstances" e do method addFont

        // class FontWeb{
        //     constructor(url){
        //         this.url = url;
        //     }

        //     getMessage(){
        //         return `Message of web: ${this.url}`;
        //     }
        // }

        // class FontEmail{
        //     constructor(email){
        //         this.email = email;
        //     }

        //     getMessage(){
        //         return `Message of email: ${this.email}`;
        //     }
        // }

        // class CollectionManagerFont{
        //     constructor(){
        //         this.listInstances = [];
        //     } 

        //     addFont(font){
        //         this.listInstances.push(font);
        //     }

        //     processMessages(){
        //         const newListWithGetMessages = this.listInstances.map(item => {
        //             return item.getMessage();
        //         });   
                
        //         return newListWithGetMessages;
        //     }
        // }

        // const fontWeb = new FontWeb("blog.com");
        // const fontEmail = new FontEmail("paulo@email.com");

        // const getFonts = new CollectionManagerFont();

        // getFonts.addFont(fontWeb);
        // getFonts.addFont(fontEmail);

        // const messages = getFonts.processMessages();

        // console.log(messages);


        // _______________________________________________________________________________



        // Concepts OOP in the exercise
            // Polimorfismo: FormatText and FormatJson, answer same formatData method with different logics
            // Associação: ReportGenerator class gerencia the collection of objects formatadores (this.listFormats)
            // Inspeção of objects: with content.constructor name === typeFormat para identificar the object correct
            
        // class FormatText{
        //     formatData(data){
        //         return data.join("\n");
        //     }
        // }

        // class FormatJson{
        //     formatData(data){
        //         const processedData = data.map(item => {
        //             const [key, value] = item.split(':');
        //             return { [key]: value };
        //         });

        //         return JSON.stringify(processedData, null, 2);
        //     }
        // }

        // class ReportGenerator{
        //     constructor(){
        //         this.listFormats = [];
        //     }

        //     addFormat(format){
        //         this.listFormats.push(format)
        //     }

        //     reportGenerator(typeFormat, datas){
        //         for(const content of this.listFormats){
        //             if(content.constructor.name === typeFormat){
        //                 return content.formatData(datas);
        //             }
        //         }

        //         return `Error: Format ${typeFormat} invalid.`;
        //     }
        // }

        // const datasSell = ["Product A: 100", "Product B: 100", "Total: 200"];

        // const generator = new ReportGenerator();

        // generator.addFormat(new FormatText());
        // generator.addFormat(new FormatJson());

        // const reportText = generator.reportGenerator("FormatText", datasSell);
        // const reportJSON = generator.reportGenerator("FormatJson", datasSell);

        // console.log(reportText);
        // console.log(reportJSON);


        // _______________________________________________________________________________


        // class TaskTracker{
        //     constructor(){
        //         this.tasks = [];
        //         this.nextId = 1;
        //     }

        //     addTask(descriptionText){
        //         const task = {
        //             id: this.nextId,
        //             description: descriptionText,
        //             completed: false
        //         };

        //         this.tasks.push(task);
        //         this.nextId += 1;
        //     };

        //     completeTask(idTask){
        //         const findTask = this.tasks.find((t) => t.id === idTask);

        //         if(findTask){
        //             findTask.completed = true; 
        //         }
        //         else{
        //             console.log("Error")
        //         }
        //     }

        //     getPendingTasks(){
        //         const tasksNotComplete = this.tasks.filter(task => task.completed === false);
        //         return tasksNotComplete;
        //     }

        //     getTotalTasks(){
        //         return this.tasks.length;
        //     }
        // }


        // const tasks = new TaskTracker();

        // tasks.addTask("Estudar");
        // tasks.addTask("Treinar");
        // tasks.addTask("Ligação com Caique");

        // tasks.completeTask(1);

        // const pendente = tasks.getPendingTasks();
        
        // console.log(pendente);
        // console.log(`Total: ${tasks.getTotalTasks()}`);


        // _______________________________________________________________________________


        // const fleet = [
        //     { 
        //         id: 1, 
        //         model: "Fusca", 
        //         dailyRate: 50, 
        //         category: "Economy" 
        //     },
        //     { 
        //         id: 2, 
        //         model: "Civic", 
        //         dailyRate: 150, 
        //         category: "Sedan" 
        //     },
        //     { 
        //         id: 3, 
        //         model: "Hilux", 
        //         dailyRate: 300, 
        //         category: "SUV" 
        //     }
        // ];

        // class RentalSystem{
        //     constructor(fleet){
        //         this.activeRentals = [];
        //         this.availableCars = [...fleet];
        //         this.fleetReference = fleet;
        //     }

        //     rentCar(carId, customerName, days){
        //         const findCar = this.availableCars.find(car => car.id === carId);

        //         if(findCar){
        //             const totalCost = findCar.dailyRate * days;

        //             this.availableCars = this.availableCars.filter(car => car.id !== carId);
        //             this.activeRentals.push({ carId, customerName, days, totalCost });

        //             return `Sucesso ${findCar.model} alugado para ${customerName}`;
        //         }
        //         else{
        //             return `Carro não disponivel`;
        //         }
        //     };

        //     returnCar(carId){
        //         const findRent = this.activeRentals.find(car => car.carId === carId);

        //         if(findRent){
        //             this.activeRentals = this.activeRentals.filter(car => car.carId !== carId);
    
        //             const carOriginal = this.fleetReference.find(car => car.carId === carId);
        //             this.availableCars.push(carOriginal);
    
        //             return `Carro ${carId} devolvido com sucesso`;
        //         }
                
        //         return `Este não consta como alugado`;
        //     }

        //     calculateTotalRevenue(){
        //         const totalRevenue = this.activeRentals.reduce((acc, rental) => {
        //             return acc + rental.totalCost;
        //         }, 0);

        //         return totalRevenue;
        //     }

        //     applyDiscount(category, percentage){
        //         this.availableCars.forEach(car => {
        //             if(car.category === category){
        //                 car.dailyRate -= car.dailyRate * (percentage / 100);
        //             }
        //         })
        //     };
        // }


        // _______________________________________________________________________________


        // Access modifiers in JS
            // Public access
                // in JavaScript the public access modifiers are set by default, if you define an attribute or method without any special symbol
                // Example:
                // class Carro {
                //     modelo = "Fusca"; // Public by default

                //     buzinar() {
                //         console.log("Beep!");
                //     }
                // }

            // Private access
                // to define the private access modifiers use the symbol "#" before the name of the attribute or method
                // Example:
                // class ContaBancaria {
                //     #saldo = 0; // Private attribute

                //     depositar(valor) {
                //         this.#saldo += valor;
                //     }

                //     verSaldo() {
                //         return `Seu saldo é R$ ${this.#saldo}`;
                //     }
                // }

                // const minhaConta = new ContaBancaria();
                // console.log(minhaConta.#saldo); // ERRO! Cannot be accessed from outside

            // Protected access
                // There is no native modifier protected in JavaScript; the community has adopted a convention that is underscore(_) before the name.
                // Example:
                // class Pai {
                //     _segredoDeFamilia = "Receita de bolo"; // Convention of the protected
                // }

                // class Filho extends Pai {
                //     usarSegredo() {
                //         console.log(this._segredoDeFamilia); // Funciona
                //     }
                // }

        // class Safe{
        //     #password;

        //     constructor(initialPassword){
        //         this.#password = initialPassword;
        //     }

        //     tryOpenSafe(password){
        //         if(password === this.#password){
        //             return "Safe open";
        //         }

        //         return "Wrong password";
        //     }

        //     changePassword(oldPassword, newPassword){
        //         if(oldPassword !== this.#password){
        //             return "Error: Wrong old password";
        //         }

        //         if(oldPassword === newPassword){
        //             return "Error: New password cannot be the same as the old one";
        //         }

        //         this.#password = newPassword;
        //         return "Password was changed";
        //     }
        // }

        // const mySafe = new Safe();
        // // console.log(mySafe.#password);

        // console.log(mySafe.tryOpenSafe(11111));
        // console.log(mySafe.tryOpenSafe(1234));

        // mySafe.changePassword(1234, 7777);
        // console.log(mySafe.tryOpenSafe(7777));

        // ______________________________________


        class BankAccount{
            #bankBalance;
            #historico;

            constructor(){
                this.#bankBalance = 0;
                this.#historico = [];
            }
            
            #valueValidation(value){
                if(typeof value === "number" && value > 0){
                    return true;
                }
                else{
                    return false;
                }
            }

            #register(type, value){
                this.#historico.push(`${type}: R$${value}`);
            }

            deposit(value){
               if(!this.#valueValidation(value)) return "Invalid value";

                this.#bankBalance += value;
                this.#register("Deposit", value);
                return `Success: R$ ${value} deposited.`;
            }

            withdraw(value){
                if(!this.#valueValidation(value)) return "Invalid value";
        
                if(value > this.#bankBalance) return "Insufficient balance";

                this.#bankBalance -= value;
                this.#register("Withdraw", value);

                return `Success: R$ ${value} withdrawn.`;
            }

            getStatement(){
                return{
                    transactions: [...this.#historico],
                    finalBalance: `R$ ${this.#bankBalance.toFixed(2)}`
                };
            }
        }


        const myAccount = new BankAccount();

        console.log(myAccount.deposit(100));
        console.log(myAccount.withdraw(55));
        console.log(myAccount.withdraw(-50));
        console.log(myAccount.getStatement());














        

    </script>
</body>
</html>